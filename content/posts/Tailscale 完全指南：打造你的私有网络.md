---
title: Tailscale 完全指南：打造你的私有网络
date: 2026-02-08T00:03:15+08:00
draft: false
description: 在这里输入简短的描述
summary: 文章摘要
tags:
categories:
  - Blog
cover: ""
author: Frida
---


Tailscale 是一款基于 WireGuard 协议的现代化组网工具,它能让你轻松构建安全的私有网络,连接分散在世界各地的设备。无论你是个人用户还是企业团队,Tailscale 都能提供简单、安全、高效的解决方案。

## 什么是 Tailscale

Tailscale 本质上是一个零配置的 VPN 服务,但它与传统 VPN 有着根本性的不同。传统 VPN 需要你把所有流量路由到中心服务器,而 Tailscale 采用点对点(P2P)连接,设备之间直接通信,只有在无法建立直连时才会通过中继服务器转发。这种设计带来了更低的延迟和更高的安全性。

Tailscale 的核心优势在于它将复杂的网络配置简化到了极致。你不需要配置防火墙规则、端口转发或 NAT 穿透,只需在设备上安装客户端并登录,它们就能自动发现并连接彼此。

## 基础玩法

### 远程访问家中设备

这是最常见的使用场景。假设你有一台家用 NAS、树莓派或者台式机,想在外出时访问上面的文件或服务。传统方法需要配置动态 DNS、端口转发,还要担心安全问题。使用 Tailscale,你只需要在家中设备和手机或笔记本上都安装 Tailscale,它们就能通过私有 IP 地址互相访问,就像在同一个局域网一样。

比如你的 NAS 在 Tailscale 网络中获得了 100.64.1.5 这个地址,那么无论你在咖啡厅、办公室还是另一个国家,都可以通过这个地址访问 NAS 的文件共享、Web 界面或其他服务。

### 多设备同步

如果你有多台电脑、手机、平板,Tailscale 可以让它们组成一个私有网络。你可以在这个网络中运行文件同步工具(如 Syncthing)、共享剪贴板、或者直接通过 SSH 在设备间传输文件。由于是点对点连接,传输速度完全取决于你的网络带宽,不受第三方服务器限制。

### 安全的远程办公

对于需要访问公司内网资源的远程工作者,Tailscale 提供了一个优雅的解决方案。IT 管理员可以在公司网络中部署一个 Tailscale 节点作为子网路由器,员工通过 Tailscale 连接后就能访问公司内网的所有资源,无需传统 VPN 的复杂配置。

## 进阶玩法

### Subnet Router(子网路由)

这是 Tailscale 最强大的功能之一。假设你家里有一个 192.168.1.0/24 的局域网,里面有很多设备(智能家居、打印机、IoT 设备)无法安装 Tailscale 客户端。你可以在网络中的一台设备(比如树莓派或路由器)上启用子网路由功能,这样 Tailscale 网络中的其他设备就能访问整个家庭局域网。

配置方法很简单,在 Linux 设备上运行:

```bash
echo 'net.ipv4.ip_forward = 1' | sudo tee -a /etc/sysctl.conf
sudo sysctl -p
tailscale up --advertise-routes=192.168.1.0/24
```

然后在 Tailscale 管理后台批准这个路由,你就能从任何地方访问家中的所有设备了。

### Exit Node(出口节点)

Exit Node 让 Tailscale 变身为传统 VPN。你可以将某个节点设置为出口节点,所有流量都会通过它转发出去。这在以下场景很有用:

一是保护隐私。在公共 WiFi 环境下,你可以让流量通过家中的出口节点,避免被监听。

二是访问地理限制内容。如果你在国外旅行,可以通过家中的出口节点访问只有本国才能使用的服务。

三是规避网络限制。某些公司或学校网络会屏蔽特定网站,通过出口节点可以绕过这些限制。

设置出口节点同样简单:

```bash
sudo tailscale up --advertise-exit-node
```

在其他设备上选择使用这个出口节点即可。

### MagicDNS

Tailscale 内置了 MagicDNS 功能,为每个设备分配一个易记的域名。比如你的 NAS 名为 "家庭服务器",它会自动获得类似 `家庭服务器.your-tailnet.ts.net` 这样的域名。你不再需要记住 IP 地址,直接用域名访问即可,而且这个域名只在你的 Tailscale 网络内解析,外部无法访问。

### ACL 访问控制

对于团队使用场景,Tailscale 提供了强大的访问控制列表(ACL)功能。你可以精确控制哪些用户或设备可以访问哪些资源。比如你可以规定:

- 开发团队只能访问开发服务器
- 运维团队可以访问所有服务器
- 实习生只能访问特定的测试环境
- 某些敏感服务器只允许特定 IP 地址访问特定端口

ACL 使用 JSON 格式配置,虽然需要一定学习成本,但提供了非常灵活的权限管理能力。

### Funnel 和 Serve

Tailscale Funnel 是一个相对较新的功能,它允许你将 Tailscale 网络中的服务安全地暴露到公网,而无需配置端口转发或购买云服务器。这对于临时分享本地开发环境、演示项目或者托管个人博客非常有用。

Serve 则是 Funnel 的私有版本,它让你在 Tailscale 网络内以 HTTPS 方式访问服务,Tailscale 会自动处理 SSL 证书。

### Taildrop 文件传输

Taildrop 是 Tailscale 内置的文件传输功能,可以在设备间快速传输文件,类似于 AirDrop 但跨平台且不受距离限制。你可以从手机向电脑发送照片,从笔记本向 NAS 传输大文件,操作简单快捷。

## 特殊场景玩法

### 搭建私有云盘

结合 Tailscale 和 Nextcloud、Seafile 等开源云盘软件,你可以搭建完全私有的云存储服务。数据存储在自己的硬盘上,通过 Tailscale 随时随地访问,不用担心隐私泄露或存储空间限制。

### 自建媒体服务器

使用 Plex、Jellyfin 或 Emby 搭配 Tailscale,你可以在任何地方流畅观看家中 NAS 上的电影、电视剧和音乐。由于是点对点连接,不会受到第三方服务器带宽限制,只要你的家庭上传速度足够,就能获得流畅的观看体验。

### 游戏联机

虽然不是 Tailscale 的主要用途,但它确实可以用来玩局域网联机游戏。对于那些只支持局域网联机的老游戏,或者想和远方朋友一起玩的情况,Tailscale 可以创建虚拟局域网。不过需要注意延迟问题,Tailscale 虽然尽可能建立直连,但如果两地距离太远,延迟仍然会比真正的局域网高。

### 物联网设备管理

如果你有多个地点的智能家居设备或 IoT 传感器,Tailscale 可以将它们统一到一个网络中。你可以在办公室监控家里的温湿度传感器,或者统一管理多个出租房的智能设备,而不需要为每个地点单独配置公网访问。

### 开发测试环境

开发者可以使用 Tailscale 搭建分布式测试环境。比如在本地开发,在云服务器上测试,在树莓派上做 ARM 平台验证,所有设备通过 Tailscale 互联,就像在同一个办公室一样方便。你还可以和同事分享本地开发服务器,让他们实时查看你的工作进度。

### 数据库远程访问

对于需要访问远程数据库的场景,直接暴露数据库端口到公网是非常危险的。通过 Tailscale,你可以安全地访问远程数据库,就像它运行在本地一样。所有流量都经过 WireGuard 加密,即使在不安全的网络环境中也能保证安全。

## 最佳实践

### 合理规划网络拓扑

虽然 Tailscale 使用简单,但对于复杂场景,提前规划仍然很重要。思考哪些设备需要互相访问,哪些需要作为网关,哪些需要访问控制。合理的规划可以避免后期频繁调整配置。

### 善用标签管理设备

Tailscale 支持给设备打标签,这在设备数量较多时非常有用。你可以用标签区分不同环境(生产、测试、开发)、不同位置(家庭、办公室、数据中心)或不同用途(服务器、客户端、网关)。标签还可以配合 ACL 实现基于组的访问控制。

### 定期检查连接状态

虽然 Tailscale 大部分时候都能自动工作,但偶尔检查一下连接状态是个好习惯。使用 `tailscale status` 命令可以查看所有设备的在线状态和连接类型(直连或中继)。如果发现某些设备总是使用中继,可能需要检查防火墙或 NAT 配置。

### 注意安全性

虽然 Tailscale 本身很安全,但设备的安全仍然需要你自己负责。定期更新系统和软件,使用强密码,启用双因素认证。记住,Tailscale 让设备更容易被访问,这也意味着如果设备被攻破,攻击者也能更容易地访问其他设备。

### 备份配置

如果你配置了复杂的 ACL 规则或子网路由,建议定期备份这些配置。虽然 Tailscale 的云端会保存配置,但本地备份一份总是更安全。

## 性能优化

### 优化直连成功率

Tailscale 的性能很大程度上取决于是否能建立直连。如果你的设备在严格的 NAT 或防火墙后面,可能需要配置 UPnP 或手动转发 UDP 端口 41641。对于企业环境,可能需要和网络管理员协调,在防火墙上开放必要的端口。

### 选择合适的 DERP 服务器

当无法建立直连时,流量会通过 DERP 中继服务器转发。Tailscale 会自动选择延迟最低的服务器,但你也可以手动指定。如果你主要在特定地区使用,可以考虑自建 DERP 服务器以获得更好的性能。

### 限制不必要的流量

如果你启用了出口节点,默认情况下所有流量都会通过它。如果只是需要访问特定资源,可以配置分流规则,只让必要的流量走 Tailscale,其他流量直连互联网,这样可以减少延迟和带宽消耗。

## 免费版与付费版

Tailscale 提供免费的个人版,支持最多 100 个设备和 3 个用户,对于大多数个人用户已经足够。付费版提供了更多用户、更多设备、更高级的 ACL 功能、SSO 集成等企业级特性。

对于个人用户,免费版基本能满足所有需求。只有当你需要团队协作或企业级功能时,才需要考虑付费。

## 总结

Tailscale 是一个功能强大而又简单易用的工具,它降低了搭建私有网络的门槛,让每个人都能轻松实现过去需要专业知识才能完成的网络配置。从简单的远程访问到复杂的企业组网,Tailscale 都能提供优雅的解决方案。

无论你是想在外访问家中的 NAS,还是为团队搭建安全的远程办公环境,或者只是想和朋友联机玩游戏,Tailscale 都值得一试。它基于现代化的 WireGuard 协议,提供了出色的性能和安全性,同时又将复杂的配置隐藏在简洁的界面后面。

开始使用 Tailscale 很简单,只需要到官网注册账号,下载客户端,然后享受无缝的私有网络体验。随着使用的深入,你会发现更多有趣的玩法和应用场景,Tailscale 的潜力远超你的想象。