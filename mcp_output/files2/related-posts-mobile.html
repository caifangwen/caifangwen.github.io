{{/* 移动端优化版相关文章组件 */}}

{{ $relatedCount := .Params.relatedPostsCount | default .Site.Params.post.relatedPostsCount | default 3 }}
{{ $showRelated := .Params.showRelated | default .Site.Params.post.showRelated | default true }}
{{ $related := .Site.RegularPages.Related . | first $relatedCount }}

{{ if and $showRelated $related }}
  <section class="related-posts mb-12">
    <!-- 标题 -->
    <div class="mb-6 md:mb-4 flex items-center gap-3 md:gap-2">
      {{ partial "features/icon.html" (dict "name" "related" "size" "md" "ariaLabel" "") }}
      <h2 class="text-foreground text-2xl md:text-xl font-bold">
        {{ i18n "post.related_posts" | default "相关文章" }}
      </h2>
    </div>

    <!-- 相关文章列表 -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-3 w-full">
      {{ range $related }}
        <article class="group">
          <a href="{{ .RelPermalink }}" class="block">
            <div class="bg-card border-border hover:bg-primary/5 hover:border-primary/20 focus:ring-primary/20 flex items-center rounded-xl border p-5 md:p-4 transition-all duration-300 ease-out hover:-translate-y-1 hover:scale-[1.02] hover:shadow-lg focus:ring-2 focus:outline-none min-h-[120px] md:min-h-[90px]">
              <div class="w-full">
                <h3 class="text-foreground group-hover:text-primary text-lg md:text-base font-semibold leading-snug line-clamp-3">
                  {{ .Title }}
                </h3>
                
                <!-- 添加日期信息 -->
                <div class="text-muted-foreground mt-2 flex items-center gap-1.5 text-xs">
                  {{ partial "features/icon.html" (dict "name" "calendar" "size" "xs" "ariaLabel" "") }}
                  <time datetime="{{ .Date.Format "2006-01-02" }}">
                    {{ .Date.Format (i18n "time.date_format_short" | default "01月02日") }}
                  </time>
                </div>
              </div>
            </div>
          </a>
        </article>
      {{ end }}
    </div>
  </section>
{{ end }}
