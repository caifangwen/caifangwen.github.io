{{ define "main" }}
  <!-- 面包屑导航 -->
  {{ partial "navigation/breadcrumb.html" . }}

  <!-- 文章头部信息 -->
  <header class="mb-8">
    <h1 class="text-foreground mb-4 text-3xl font-bold md:text-4xl">{{ .Title }}</h1>
    
    <!-- 元信息 -->
    <div class="text-muted-foreground flex flex-wrap items-center gap-4 text-sm">
      <div class="flex items-center gap-1.5">
        {{ partial "features/icon.html" (dict "name" "calendar" "size" "sm" "ariaLabel" (i18n "post.published_on")) }}
        <time datetime="{{ .Date.Format "2006-01-02" }}">
          {{ .Date.Format (i18n "time.date_format" | default "2006年01月02日") }}
        </time>
      </div>
      
      {{ if .ReadingTime }}
      <div class="flex items-center gap-1.5">
        {{ partial "features/icon.html" (dict "name" "clock" "size" "sm" "ariaLabel" (i18n "post.reading_time")) }}
        <span>{{ .ReadingTime }} {{ i18n "time.minute" | default "分钟" }}</span>
      </div>
      {{ end }}
      
      {{ if isset .Params "tags" }}
      <div class="flex flex-wrap items-center gap-1.5">
        {{ partial "features/icon.html" (dict "name" "tag" "size" "sm" "ariaLabel" "标签" ) }}
        {{ range $index, $tag := .Params.tags }}
          {{ if gt $index 0 }}, {{ end }}
          <a href="{{ "/tags/" | relLangURL }}{{ $tag | urlize }}" 
             class="text-primary hover:text-primary/80 transition-colors">
            {{ $tag }}
          </a>
        {{ end }}
      </div>
      {{ end }}
    </div>
  </header>

  <!-- 文章内容 -->
  <article class="prose prose-neutral dark:prose-invert mb-12 max-w-none">
    {{ .Content }}
  </article>

  <!-- Giscus 评论系统 -->
  {{ if site.Params.comments.enabled }}
    {{ if eq site.Params.comments.system "giscus" }}
    <div class="comments-section mt-12 pt-8 border-t border-border">
      <h2 class="text-foreground mb-6 text-2xl font-bold flex items-center gap-3">
        {{ partial "features/icon.html" (dict "name" "message-circle" "size" "md" "ariaLabel" "") }}
        <span>讨论评论</span>
      </h2>
      {{ partial "features/comments.html" . }}
    </div>
    {{ end }}
  {{ end }}

{{ end }}
